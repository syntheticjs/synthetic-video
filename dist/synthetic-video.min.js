!function(){var t=function(){var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===e.call(t)},i=function(n){"use strict";if(!n||"[object Object]"!==e.call(n))return!1;var i=t.call(n,"constructor"),r=n.constructor&&n.constructor.prototype&&t.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!i&&!r)return!1;var o;for(o in n);return"undefined"==typeof o||t.call(n,o)};return function r(){"use strict";var t,e,o,s,c,u,l=arguments[0],a=1,h=arguments.length,d=!1;for("boolean"==typeof l?(d=l,l=arguments[1]||{},a=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});h>a;++a)if(t=arguments[a],null!=t)for(e in t)o=l[e],s=t[e],l!==s&&(d&&s&&(i(s)||(c=n(s)))?(c?(c=!1,u=o&&n(o)?o:[]):u=o&&i(o)?o:{},"Ref"!==s.constructor.name&&(l[e]=r(d,u,s))):"undefined"!=typeof s&&(l[e]=s));return l}}(),n=function(){var t=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};return function(e){for(var n=1;n<arguments.length;n++)"object"==typeof arguments[n]&&t(e,arguments[n]);return e}}(),r=function(){return["Function","Number","String","Array","Object","Boolean","Data"]}(),o=function(t){return function(e){return t.indexOf(e)>=0}}(r),s=function(){return function(t){return t.charAt(0).toUpperCase()+t.substr(1)}}(),c=function(t,e){return function(n,i){var r={};return"object"==typeof i.prototype.__super__&&e(r,i.prototype.__super__),e(r,i.prototype),n.__proto__&&n.__proto__===Object.prototype&&(n.__proto__=Object.create(null),window.tar=n),"object"==typeof n.__proto__?e(n.__proto__,r):t(n,r),i.apply(n),n}}(t,n),u=function(t){return function(e,n){n instanceof Array||(n=[n]);var i=n.length,r=function(){var t=Array.prototype.slice.apply(arguments);"object"!=typeof this.constructors&&Object.defineProperty(this,"constructors",{configurable:!1,enumerable:!1,writable:!1,value:[]});for(var e=0;i>e;++e)this.constructors.indexOf(n[e])>=0||(this.constructors.push(n[e]),n[e].apply(this,t))},o=r.prototype={};e.prototype&&null!==e.prototype&&e.prototype.__super__&&t(o,e.prototype.__super__);for(var s=0;i>s;++s)n[s].prototype&&(n[s].prototype.__super__&&(o=t(o,n[s].prototype.__super__)),o=t(o,n[s].prototype));o.constructor=r;var c=function(){if(this.constructor&&this.constructor.__disableContructor__)return console.log("ESCAPE CONSTRUCTOR"),this.constructor.__disableContructor__=!1,!1;var t=Array.prototype.slice.apply(arguments);this!==window&&r.apply(this,t),e.apply(this,t)};c.prototype=Object.create(o,{__super__:{configurable:!1,enumerable:!1,writable:!1,value:o}}),e.prototype&&t(c.prototype,e.prototype);for(var u in e)e.hasOwnProperty(u)&&(c[u]=e[u]);return Object.defineProperty(c.prototype,"constructor",{configurable:!1,enumerable:!1,writable:!1,value:c}),c.prototype.__proto__||(c.prototype.__proto__=c.prototype),c}}(n),l=function(t){return function(e){var n=[],i=typeof e,r=t(i);if(n.push(r),this.sings[i])for(var o in this.sings[i])this.sings[i].hasOwnProperty(o)&&this.sings[i][o](e)&&n.push(t(o));return n}}(s),a=function(t,e,n,i){var r=function(o,s){var c,u;if(c="string"==typeof o?this.classes[o]:o,"string"!=typeof s||!t(s)){if(u="string"==typeof s?this.classes[s]:s,"undefined"==typeof c)throw"Undefined class "+o;if("function"==typeof c&&"function"==typeof u){var l="object"==typeof c.prototype.inheritedBy?c.prototype.inheritedBy:[];l.indexOf(u.className)<0&&(l.push(u.className),c=n(c,[u]),c.prototype.inheritedBy=l)}else"object"==typeof c&&("function"==typeof u?c=e(c,u):"object"==typeof u&&(c=i(c,u)))}if("string"==typeof s&&"object"==typeof this.classesBindings[s])for(var a=0;a<this.classesBindings[s].length;++a)c=r.call(this,c,this.classesBindings[s][a]);return c};return r}(o,c,u,t),h=function(t,e,n){var i=function(t,r){var o,s;if("object"==typeof t&&t.__abstract__)return r&&(t=n.call(i,t,r)),t;var c=e.call(i,t);for(r&&c.indexOf(r)<0&&c.push(r),o=function(){},o.prototype=Object.create({},{__abstract__:{configurable:!1,enumerable:!0,writable:!0,value:{classes:c}},__subject__:{configurable:!1,enumerable:!0,writable:!0,value:t}}),s=0;s<c.length;++s)o=n.call(i,o,c[s]);return new o};return i.determineAbstractClass=function(t){return e.call(i,t)},i.extend=function(e){return t(i,e),i},i.classes={},i.classesBindings={},i.bindClass=function(t,e){return"undefined"==typeof i.classesBindings[e]&&(i.classesBindings[e]=[]),i.classesBindings[e].indexOf(t)<0&&i.classesBindings[e].push(t),this},i.sings={},i.registerSing=function(t,e,n){return"object"!=typeof i.sings[t]&&(i.sings[t]={}),i.sings[t][e]=n,i},i.aliases={},i.alias=function(){return arguments.length>1?void(i.aliases[arguments[0]]=arguments[1]):i.aliases[arguments[0]]||null},i.warn=function(){throw new Error(Array.prototype.slice.call(arguments).join(" "))},i}(t,l,a,o),d=function(t,e){return function(n,i){var r=i||function(){};return r.assignTo=function(e){return t.bindClass(r.className,e),r},r.charge=function(e){return t.charge(r.className,e)},r.extend=function(t){return e(r.prototype,t),r},r.embeddable=!1,r.className=n,r}}(h,n);!function(t,e){t.extend({registerClass:function(n,i){return t.classes[n]=e(n,i||!1),t.classesBindings[n]instanceof Array||(t.classesBindings[n]=[]),t.classes[n]},"class":function(e){if("function"==typeof t.classes[e])return t.classes[e];throw"Class `"+e+"` not exists"},classExists:function(e){return"function"==typeof t.classes[e]?!0:!1},module:function(e){var n="module"+e.charAt(0).toUpperCase()+e.substr(1);return"function"==typeof t.classes[n]?t.classes[n]:null},moduleExists:function(e){var n="module"+e.charAt(0).toUpperCase()+e.substr(1);return"function"==typeof t.classes[n]?!0:!1}})}(h,d);var f=function(t){return t}(h),p=function(){return["HTML","DOCUMENT","BODY","A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","BASE","BASEFONT","BIG","BLINK","BLOCKQUOTE","BODY","BR","B","BUTTON","CAPTION","CENTER","CITE","CODE","COL","DFN","DIR","DIV","DL","DT","DD","EM","FONT","FORM","H1","H2","H3","H4","H5","H6","HEAD","HR","HTML","IMG","INPUT","ISINDEX","I","KBD","LINK","LI","MAP","MARQUEE","MENU","META","OL","OPTION","PARAM","PRE","P","Q","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKEOUT","STRONG","STYLE","SUB","SUP","TABLE","TD","TEXTAREA","TH","TBODY","THEAD","TFOOT","TITLE","TR","TT","UL","U","VAR"]}(),y=function(){!function(){function t(t,n){var r=t[n];t[n]=function(t){var n,o=!1,s=!1;return t.match(i)?(t=t.replace(i,""),this.parentNode||(e.appendChild(this),s=!0),parentNode=this.parentNode,this.id||(o=this.attributeChangedCallback||!0,this.attributeChangedCallback=!1,this.id="rootedQuerySelector_id_"+(new Date).getTime()),n=r.call(parentNode,"#"+this.id+" "+t),o&&(this.id="","function"==typeof o&&(this.attributeChangedCallback=o),o=null),s&&e.removeChild(this),n):r.call(this,t)}}if(!HTMLElement.prototype.querySelectorAll)throw new Error("rootedQuerySelectorAll: This polyfill can only be used with browsers that support querySelectorAll");var e=document.createElement("div");try{e.querySelectorAll(":scope *")}catch(n){var i=/^\s*:scope/gi;t(HTMLElement.prototype,"querySelector"),t(HTMLElement.prototype,"querySelectorAll")}}();var t=/:(eq|nth\-child)\(([0-9n\+ ]+)\)/gi,e={eq:function(t,e){var n;return isNaN(n=parseInt(e[2]))?[]:[0>n&&-1*n<t.length?t[t.length-n]:n<t.length?t[n]:[]]},"nth-child":function(t,e){var n,i=!1,r=0,o=[];if(isNaN(n=parseInt(e[2])))return[];for(i=e[2].indexOf("n")>=0;r<t.length;r++)i||r!==n||o.push(t[r]),i&&r%n===0&&o.push(t[r]);return o}},n=function(n,i){var r=t.exec(i);return"function"!=typeof e[r[1]]?[]:e[r[1]](n,r)},i=function(e,r){var o;switch(o=r&&r instanceof HTMLElement?":scope ":"",typeof e){case"string":var s=/<([a-zA-Z0-9_]+) \/>/i,c=/\[([a-zA-Z0-9_\-]*)[ ]?=([ ]?[^\]]*)\]/i;if(e.indexOf("[")>-1&&c.exec(e)){e=e.replace(c,'[$1="$2"]')}if(null!==s.exec(e))return[document.createElement(result[1].toUpperCase())];if(0===e.length)return new Array;try{return r.querySelectorAll(o+e)}catch(u){if(t.lastIndex=0,1==t.test(e)){var l=e.match(t)[0];return n(i(e.replace(t,""),r),l)}throw"querySelectorAll not support query: "+e}break;case"function":return[];case"object":if(e instanceof Array)return e;if(null===e)return[];if(e==window)return[e];if(e.jquery){for(var a=[],h=0;h<e.length;h++)a.push(e[h]);return a}if(e.brahma){for(var a=[],h=0;h<e.length;h++)a.push(e[h]);return a}return[e];case"undefined":default:return[e]}};return function(t,e){var e=e||document,n=[];n=e instanceof NodeList||e instanceof Array?Array.prototype.slice.apply(e):[e];for(var r=[],o=0;o<n.length;++o){var s=i(t,n[o]);if(("object"==typeof s||"function"==typeof s)&&"number"==typeof s.length)for(var c=0;c<s.length;++c)r.push(s[c])}return r}}();!function(t){t.registerSing("object","HTMLElement",function(t){return t===document||"[object HTML"===Object.prototype.toString.call(t).substr(0,12)?!0:!1})}(h),function(t,e){t.registerSing("string","Selector",function(t){for(var n=t.split(/[> ]+/),i=!1,r=0;r<n.length;r++)!function(t){return e.indexOf(t.toUpperCase())>=0?(i=!0,!0):/^[>#\.[]]{0,2}[^'", ]+[a-zA-Z0-9\-\[]+/.test(t)?(i=!0,!0):void 0}(n[r]);return i})}(h,p),function(t){t.registerSing("object","Query",function(t){return t.brahma||t.jquery})}(h),function(t){t.registerSing("object","Window",function(t){return t===window})}(h);var v=function(t,e){var n=t.registerClass("Dom",function(){this.selector=this.__subject__;var t=e.call(this,this.selector);if(("object"==typeof t||"function"==typeof t)&&t.length)for(index=0;index<t.length;index++)this[index]=t[index];this.length=t.length,this.context=document,this.brahma=!0});return n.assignTo("Selector"),n.assignTo("HTMLElement"),n.assignTo("Window"),n.assignTo("Query"),n}(f,y);!function(t){t.registerSing("object","RichArray",function(t){return t instanceof Array||!t.hasOwnProperty("length")||"number"!=typeof t.length?!1:!0})}(h);var g=function(t){var e=t.registerClass("Eacher",function(){});return e.assignTo("Object"),e.assignTo("Selector"),e.assignTo("RichArray"),e}(f),m=function(){return function(t){return"object"==typeof t&&t!==document&&"[object HTML"!==t.toString().substr(0,12)||"function"==typeof t?t:!1}}(),b=function(){return function(t){return"object"!=typeof t&&"function"!=typeof t||"number"!=typeof t.length?!1:t}}();!function(t,e,n){t.extend({each:function(t){var i,r=0;if(this.__subject__&&n(this.__subject__)?(i=this.__subject__,r=1):this.__subject__&&e(this.__subject__)?(i=this.__subject__,r=0):n(this)?(i=this,r=1):(i=this,r=0),1===r){if("number"==typeof i.length)for(var o=0;o<i.length&&t.call(i[o],i[o],o)!==!1;++o);return i}for(var s in i)if(i.hasOwnProperty(s)&&t.call(i[s],i[s],s)===!1)break}})}(g,m,b),v.extend({css:function(){var t,e=[];return"object"==typeof arguments[0]?arguments[0]instanceof Array?(e=arguments[0],t=arguments[1]):t=arguments[0]:arguments.length>1?(t={},t[arguments[0]]=arguments[1]):t=arguments[0],"object"==typeof t?(this.each(function(){for(var n in t){if(0!==e.length)for(var i=0;i<e.length;i++)this.style[e[i]+n]=t[n];this.style[n]=t[n]}}),this):this[0].style[t]}});var _=function(){return function(t){return Array.prototype.slice.call(t)}}(),E=function(t){return function(e,n,i){var r=this===window?document.body:this;n=n||{};try{var o=document.createElement(e)}catch(s){return t.warn("Not valid filename: "+e),null}i?function(){null!==r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(r)}():r.appendChild(o);for(var c in n)n.hasOwnProperty(c)&&o.setAttribute(c,n[c]);return t([o],"HTMLElement")}}(f),w=function(t){return function(e){var n=[],i=typeof e,r=t(i);if(n.push(r),this.sings[i])for(var o in this.sings[i])this.sings[i].hasOwnProperty(o)&&this.sings[i][o](e)&&n.push(t(o));return n}}(s),A=function(t,e,n,i){return function(r,o){var s=[],c=i.call(t,r);return c.indexOf("HTMLElement")>=0?s=[r]:c.indexOf("Selector")>=0||c.indexOf("String")>=0?s=e(r,o||{}):c.indexOf("Array")>=0||c.indexOf("RichArray")>=0||c.indexOf("Query")>=0?s=n(r):t.warn("Selector unknown format "+c[0]),s}}(f,E,_,w);!function(t,e){e.extend({show:function(){return this.each(function(e){"undefined"!=typeof e.backupStyle&&e.backupStyle.display?t(e).css("display",e.backupStyle.display):t(e).css("display","")}),this}})}(f,v),function(t,e){e.extend({hide:function(){return this.each(function(e){var n=t(e).css("display");"none"!==n&&("undefined"==typeof e.backupStyle&&(e.backupStyle={}),e.backupStyle.display=n),t(e).css("display","none")}),this}})}(f,v),function(t){t.registerSing("object","Array",function(t){return t instanceof Array?!0:!1})}(h);var S=function(){return function(t,e,n,i){var r;r=function(o){i&&(t.addEventListener?t.removeEventListener(e,r,!1):t.attachEvent?element.detachEvent("on"+e,r):t["on"+e]=null),function(t){return"boolean"==typeof t&&t===!1}(n.apply(this,arguments))&&o.preventDefault()},null!=t&&"undefined"!=typeof t&&(t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r)}}(),T=function(){return function(t,e,n){t.addEventListener?t.removeEventListener(e,n||!1,!1):t.attachEvent?element.detachEvent("on"+e,n):t["on"+e]=null}}();!function(t,e){e.extend({present:function(e){return this.each(function(n){e?t(n).show():t(n).hide()}),this}})}(f,v);var x=function(t){var e=t.registerClass("Objective",function(){return this});return e.assignTo("Object"),e.assignTo("Selector"),e.assignTo("Array"),e}(f,null),F=function(){return{ogg:'video/ogg; codecs="theora, vorbis"',ogv:'video/ogv; codecs="vorbis"',webm:"video/webm",mp4:"video/mp4"}}();!function(t,e,n){e.extend({put:function(e,r){var o=n(e,r);return this.each(function(){for(i=0;i<o.length;++i)this.appendChild(o[i])}),t(o,"HTMLElement")}})}(f,v,A),v.extend({empty:function(){return this.each(function(){this.innerHTML=""}),this}}),v.extend({css:function(){var t,e=[];return"object"==typeof arguments[0]?arguments[0]instanceof Array?(e=arguments[0],t=arguments[1]):t=arguments[0]:arguments.length>1?(t={},t[arguments[0]]=arguments[1]):t=arguments[0],"object"==typeof t?(this.each(function(){for(var n in t){if(0!==e.length)for(var i=0;i<e.length;i++)this.style[e[i]+n]=t[n];this.style[n]=t[n]}}),this):this[0].style[t]}}),v.extend({condition:function(t,e,n){return t?"function"==typeof e?e.call(this,t):this:"function"==typeof n?n.call(this):this}}),v.extend({classed:function(){var t,e=arguments[0].split(" "),n=!!arguments[1];return this.each(function(i){for(t=0;t<e.length;++t){var r=i.className.split(" ");if(n)r.indexOf(e[t])<0&&(r.push(e[t]),i.className=r.join(" "));else{var r=i.className.split(" "),o=r.indexOf(e[t]);o>-1&&(r.splice(o,1),i.className=r.join(" "))}}}),this}}),function(t,e,n,i){t.extend({bind:function(){var t=arguments,n=t[0].split(" ");return this.each(function(){if(""===n[i])return!0;for(var i=0;i<n.length;++i)e(this,n[i],t[1],t[2]||!1)}),this},on:function(){return this.bind.apply(this,arguments)},once:function(){var t=i(arguments);return t[2]=!0,this.bind.apply(this,t)},unbind:function(){var t=arguments,e=t[0].split(" ");return this.each(function(){for(var i=0;i<e.length;++i)n(this,e[i],t[1]||!1)}),this}})}(v,S,T,_),v.extend({html:function(t){return"undefined"==typeof t?this.length<=0?null:this[0].innerHTML:(this.each(function(){this.innerHTML=t}),this)}}),function(t,e,n){e.extend({and:function(e,r){var o=n(e,r);return this.each(function(){var t=this.parentNode;if(t.lastChild===this)for(i=0;i<o.length;++i)t.appendChild(o[i]);else for(i=0;i<o.length;++i)t.insertBefore(o[i],this.nextSibling)}),t(o,"HTMLElement")}})}(f,v,A),v.extend({width:function(){if(this[0]===window){var t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return t.innerWidth||n.clientWidth||i.clientWidth}return this[0].offsetWidth}}),v.extend({height:function(){if(this[0]===window){var t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return t.innerWidth||n.clientHeight||i.clientHeight}return this[0].offsetHeight}}),x.extend({tie:function(t){return t.call(this),this}}),function(t,n){function i(t){var e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;if(e)e.call(t);else if("undefined"!=typeof window.ActiveXObject){try{var n=new ActiveXObject("WScript.Shell")}catch(i){return!1}null!==n&&n.SendKeys("{F11}")}}function r(){if(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),"undefined"!=typeof window.ActiveXObject){try{var t=new ActiveXObject("WScript.Shell")}catch(e){return!1}t.SendKeys("{F11}")}document.msExitFullscreen&&document.msExitFullscreen()}function o(e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.width="24px",n.style.height="18px",t(this).html('<svg width="24px" height="18px">'+u[e]+"</svg>")}var s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,c=function(t,e,n,i){return t.addEventListener?listen=t.addEventListener(e,n,!1):t.attachEvent?listen=t.addEventListener("on"+e,n,!1):t["on"+e]=n,t},u={"synthetic-video-icon-fullscreen":'<g id="synthetic-video-icon-fullscreen"><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M0,0v3v5h3V3.005l5.984,0.01L9,0H3H0z M3,14.995V10H0v5v3h3h6l-0.016-3.016L3,14.995z M21,0h-6l0.016,3.016L21,3.005V8h3V3V0H21z M21,14.995l-5.984-0.011L15,18h6h3v-3v-5h-3V14.995z"/></g>',"synthetic-video-icon-normalscreen":'<g id="synthetic-video-icon-normalscreen"><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M0,10l0.016,3.016L6,13.005V18h3v-5v-3H6H0z M24,8l-0.016-3.016L18,4.995V0h-3v5v3h3H24z M6,4.995l-5.984-0.01L0,8h6h3V5V0H6V4.995z M15,10v3v5h3v-4.995l5.984,0.011L24,10h-6H15z"/></g>',"synthetic-video-icon-pause":'<g id="synthetic-video-icon-pause"><rect fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="4" x="6" y="2" height="13.75"/><rect x="13.75" y="2" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" width="4" height="13.75"/></g>'};Synthetic.createComponent("synthetic-video",function(u){return u.attached(function(){}).created(function(n,i,r){console.log("creating"),r.loaded=!1,this.videoElement=t(i).empty().put("video",{classed:""}).bind("dblclick",function(){return n.toggleFullscreen(),e.stopPropagation(),!1}).bind("click",function(){n.toggle()})[0],this.dummy=!1,t(i).css({position:"relative"}),this.videoControl=t(i).put("div",{"class":"synthetic-video__controll"}).bind("click",function(){n.toggle()}).bind("dblclick",function(){return n.toggleFullscreen(),e.stopPropagation(),!1}),this.videoControlPlay=this.videoControl.put("a",{"class":"synthetic-video__playbtn synthetic-video__unvisible",href:""}).tie(function(){t(this).put("div").html('<svg><g><path fill="none" d="M29,16.491L0,32.982V0L29,16.491z"/></g></svg>')}).bind("click",function(t){return r.playing?n.stop():n.play(),t.stopPropagation(),!1}),this.videoControlFullscreen=this.videoControl.put("a",{href:"","class":"synthetic-video__fullscreenbtn"}).tie(function(){t(this).put("span",{"class":"synthetic-video__disabled"}).tie(function(){o.call(this,"synthetic-video-icon-fullscreen")}).and("span",{"class":"synthetic-video__enabled"}).tie(function(){o.call(this,"synthetic-video-icon-normalscreen")})}).bind("click",function(t){return r.fullscreen?n.normalView():n.fullscreen(),t.stopPropagation(),!1}),this.videoControlPausebtn=this.videoControl.put("a",{href:"","class":"synthetic-video__pausebtn"}).tie(function(){t(this).put("span",{}).tie(function(){o.call(this,"synthetic-video-icon-pause")})}).bind("click",function(t){return n.toggle(),t.stopPropagation(),!1}),document.addEventListener("fullscreenchange",function(){n.testExitFullscreen()},!1),document.addEventListener("webkitfullscreenchange",function(){n.testExitFullscreen()},!1),document.addEventListener("mozfullscreenchange",function(){n.testExitFullscreen()},!1),document.addEventListener("MSFullscreenChange",function(){n.testExitFullscreen()},!1),r.attributes.ratio&&c(window,"resize",function(){n.trimVideo()})}),u.watch("attributes",["poster"],function(t,e){e?this.videoElement.setAttribute("poster",e):this.videoElement.removeAttribute("poster")}),u.watch("attributes",["controls"],function(t,e){this.videoControlPlay.present(Synthetic.hasPropertySubKey(e,"play")),this.videoControlFullscreen.present(Synthetic.hasPropertySubKey(e,"fullscreen"))}),u.watch("attributes",["ratio"],function(t){t.trimVideo()}),u.watch("attributes",["types","src"],function(e,i,r){t(this.videoElement).empty(),i=i.split(","),psrc=r.lastIndexOf(".")>r.lastIndexOf("/")?r.substring(0,r.lastIndexOf(".")):r;for(var o=0;o<i.length;++o)t(this.videoElement).put("source",{src:psrc+"."+i[o],type:n[i[o]]||""});e.loaded=!1,this.videoElement.load(),e.waitForEscapeFullscreen=!1,e.playing=!1,this.testVideo()}),u.watch(["loaded"],function(e,n,i){console.log("loaded!",i),t(this.videoElement).classed("synthetic-video__unvisible",!i),i&&(this.trimVideo(),n.attributes.autoplay&&setTimeout(function(){e.play()},100))}),u.watch("attributes",["muted"],function(t){this.videoElement.muted=!!t}),u.watch("attributes",["ratio","valign","vshift"],function(e,n,i,r,o){var s=t(n).width(),c=parseInt(s)*parseFloat(i),u=t(this.videoElement).height();switch(r||"middle"){case"top":var l=0;break;case"middle":var l=(c-u)/2;break;case"bottom":var l=c-u}l+=parseInt(o),t(this.videoElement).css(e.waitForEscapeFullscreen?{"margin-top":"0px"}:{"margin-top":l+"px"})}),u.watch(["fullscreen"],function(e,n){t(e.videoControlFullscreen).classed("synthetic-video__active",n)}),u.watch(["playing","loaded","attributes.poster"],function(e,n,i){this.$element.style.backgroundImage=i&&!e&&0===this.videoElement.currentTime?"url("+i+")":"none",t(this.videoElement)[0].style.visibility=e?"visible":"hidden",t(this.videoControlPausebtn).classed("synthetic-video__unvisible",!e&&!!n),t(this.videoControlPlay).classed("synthetic-video__unvisible",!(!e&&n)),t(this.videoControlFullscreen).classed("synthetic-video__unvisible",!n)}),{testVideo:function(t){var e=this,n=s?2:3;0===this.videoElement.readyState&&this.trimVideo(),this.videoElement.readyState<n?setTimeout(function(){e.testVideo()},300):(t.loaded=!0,console.log("set loaded to true"))},trimVideo:function(e,n){if(0!=this.videoElement.videoHeight){n.attributes.ratio&&!n.fullscreen&&t(e).css("height",Math.round(t(e).width()*parseFloat(n.attributes.ratio))+"px"),n.fullscreen&&t(e).css("height","100%");var i=this.videoElement.videoHeight,r=this.videoElement.videoWidth,o=n.fullscreen?t(window).width():t(e).width(),s=n.attributes.ratio&&!n.fullscreen?Math.round(parseFloat(n.attributes.ratio)*o):t(e).height(),c=o/r,u=i*c;t(this.videoElement).css({width:o+"px",height:u+"px"}),n.attributes.ratio&&t(this.videoElement).css({marginTop:Math.round((s-u)/2)+"px"})}},play:function(e,n){return e.mobileAPI&&!n?this.fullscreen():(t(this.videoElement).classed("synthetic-video__unvisible",!1),e.playing=!0,this.displayVideo(!0),this.trimVideo()),this},stop:function(e,n){return this.mobileAPI&&!n&&t(this.videoElement).classed("synthetic-video__unvisible",!0),this.videoElement.pause(),e.playing=!1,this},toggle:function(t){t.playing?this.stop(!0):this.play()},toggleFullscreen:function(t){t.fullscreen?this.normalView():this.fullscreen()},fullscreen:function(e,n,r){return t(e).classed("synthetic-video__require-fullscreen",!0),this.backupCss={width:e.style.width,height:e.style.height},t(e).css({width:"100%",height:"100%"}),r.fullscreen=!0,this.dummy=t(e).and("div").css({display:"none"})[0],document.body.appendChild(e),this.play(!0),i(document.body),setTimeout(function(){t("body").classed("synthetic-video__require-fullscreen",!0),r.waitForEscapeFullscreen=!0,n.trimVideo()},350),this},normalView:function(e,n,i,o){return t(n).classed("synthetic-video__require-fullscreen",!1),t(n).css(this.backupCss),i.fullscreen=!1,i.waitForEscapeFullscreen=!1,o||r(),i.attributes.stopOutFullscreen&&this.stop(),this.dummy&&(t(this.dummy).and(n),t(this.dummy)[0].parentNode.removeChild(this.dummy),this.videoElement.play()),t("body").classed("synthetic-video__require-fullscreen",!1),setTimeout(function(){e.trimVideo()},350),this},testExitFullscreen:function(t){t.waitForEscapeFullscreen&&this.normalView(!0)},displayVideo:function(e,n,i){this.displayWrapper(),n&&(e.loaded&&t(this.videoElement).classed("synthetic-video__unvisible",!1),this.videoElement.play(),i&&this.fullscreen())},displayWrapper:function(e){t(e).classed("synthetic-video__unvisible",!1)}}})}(f,F)}();